(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){},63:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),s=n(26),a=n.n(s),r=n(3),o=(n(33),n(2)),l=n.n(o),j=n(6),d=n(4),b=n(0);var u=function(){var t=Object(c.useState)(""),e=Object(r.a)(t,2),n=e[0],i=e[1],s=Object(c.useState)([]),a=Object(r.a)(s,2),o=(a[0],a[1],Object(d.g)()),l=function(t){o.push("/search?q=".concat(n)),t.preventDefault()};return Object(b.jsx)("div",{className:"Search",children:Object(b.jsxs)("form",{onSubmit:l,children:[Object(b.jsx)("span",{className:"material-icons",onClick:l,children:"search"}),Object(b.jsx)("input",{placeholder:"placehodl",onChange:function(t){var e=t.target.value;i(e)}})]})})},h=(n(61),n.p+"static/media/movify-sm.85ab3be7.png");var O=function(){return Object(b.jsxs)("div",{className:"Navbar",children:[Object(b.jsxs)("div",{className:"brand",children:[Object(b.jsx)("img",{src:h,alt:"logo"}),Object(b.jsx)("div",{children:"Movify"})]}),Object(b.jsx)(u,{})]})};n(62);var x=function(){var t=Object(c.useContext)(L),e=Object(c.useContext)(P),n=[{path:"/home",text:"Home"},{path:"/friends",text:"Friends"},{path:"/users/".concat(t.id,"/collections/"),text:"Collections"}],i=e.map((function(t){return{path:"/collections/".concat(t.id),text:t.name}}));return Object(b.jsx)("div",{className:"Sidebar",children:Object(b.jsx)("ul",{children:n.concat(i).map((function(t,e){return Object(b.jsx)("li",{children:Object(b.jsx)(j.c,{exact:!0,to:t.path,activeClassName:"active",children:t.text})})}))})})};var p=function(){var t=Object(c.useContext)(L),e="https://redishacks.ew.r.appspot.com/users/"+t.id;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h1",{children:["Welcome back, ",t.name]}),Object(b.jsx)("button",{onClick:function(){navigator.clipboard.writeText(e)},children:"copy link"}),Object(b.jsx)("h2",{children:"profile"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{className:"pic",src:t.picture,alt:"profile"}),Object(b.jsx)("div",{children:t.username})]})]})},f=n(12),v=function(t){var e,n=t.data,i=n.picture,s=n.name,a=n.id,o=n.follow,d=Object(c.useState)({follow:o}),u=Object(r.a)(d,2),h=u[0],O=u[1];return Object(b.jsx)("li",{children:Object(b.jsxs)(j.b,{to:"/users/"+a,children:[Object(b.jsx)("img",{src:i,alt:"profile"}),Object(b.jsx)("h1",{children:s}),Object(b.jsx)("button",{onClick:(e={follow:!h.follow},function(){var t;O(Object(f.a)(Object(f.a)({},h),e)),!0===e.follow&&(t=a,l.a.put("/api/follows/".concat(t)))}),children:h.follow?"Unfollow":"Follow"})]})})};function m(){var t=Object(c.useContext)(L),e=Object(c.useState)(),n=Object(r.a)(e,2),i=n[0],s=n[1];Object(c.useEffect)((function(){var e;(e=t.id,l.a.get("/api/users/".concat(e,"/follows"))).then((function(t){return s(t.data)}))}),[t.id]);var a=void 0===i?Object(b.jsx)("p",{children:"Loading"}):0===i.length?Object(b.jsx)("p",{children:"No friends"}):Object(b.jsx)("ul",{children:i.map((function(t){return Object(b.jsx)(v,{data:t})}))});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Friends"}),a]})}var g=n(28);n(63);function w(t){var e=t.mid,n=Object(c.useState)(!1),i=Object(r.a)(n,2),s=i[0],a=i[1],o=Object(c.useContext)(P);return Object(b.jsxs)("div",{onClick:function(t){a(!s),t.preventDefault()},style:{fontSize:"2em"},children:[Object(b.jsx)(g.a,{}),s&&Object(b.jsx)("ul",{className:"popper",children:o.map((function(t,n){return Object(b.jsx)("li",{onClick:function(){return function(t,e){l.a.put("/api/collections/".concat(t,"/movies/").concat(e))}(t.id,e)},children:t.name})}))})]})}var y=function(t){t.mid;var e=t.collections,n=t.friends;return Object(b.jsxs)("div",{className:"me",children:[Object(b.jsxs)("div",{className:"friends",children:[e.length," collections"]}),Object(b.jsxs)("div",{className:"friends",children:[n.length," friends"]})]})};var C=function(t){var e=t.movie;if(void 0===e)return Object(b.jsx)("p",{children:" something went wrong, pls tell us "});var n=e.info;return console.log(n.poster),n.poster=n.poster||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/JPEG_example_subimage.svg/300px-JPEG_example_subimage.svg.png",Object(b.jsx)(j.b,{to:"/movies/"+n.id,children:Object(b.jsxs)("div",{className:"MovieTile",children:[Object(b.jsx)("img",{className:"poster",src:n.poster,alt:"poster"}),Object(b.jsxs)("div",{className:"desc",children:[Object(b.jsx)("p",{className:"title",children:n.title}),Object(b.jsx)("p",{className:"date",children:n.year}),Object(b.jsx)(y,{mid:n.id,collections:e.collections,friends:e.friends}),Object(b.jsx)(w,{mid:e.info.id})]})]})})};var S=function(){var t=Object(c.useState)(),e=Object(r.a)(t,2),n=e[0],i=e[1],s=Object(c.useState)(),a=Object(r.a)(s,2),o=a[0],j=a[1],u=Object(c.useState)(),h=Object(r.a)(u,2),O=h[0],x=h[1],p=Object(d.i)().id;return Object(c.useEffect)((function(){l.a.get("/api/movies/"+p).then((function(t){i(t.data.info),j(t.data.friends),x(t.data.collections)}))}),[p]),console.log(n),void 0===n?Object(b.jsx)("div",{children:"Loading"}):null===n?Object(b.jsx)("div",{children:" not found "}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:n.poster,alt:"poster"}),Object(b.jsx)("h1",{children:n.title}),Object(b.jsxs)("p",{children:[n.popularity," pop"]}),Object(b.jsxs)("p",{children:[n.revenue," $$$"]}),Object(b.jsxs)("p",{children:[n.runtime,"min"]}),Object(b.jsx)("p",{children:n.original_language}),Object(b.jsx)("h1",{children:"Crew"}),n.crew&&n.crew.map((function(t){return Object(b.jsxs)("li",{children:[t.name," as ",t.job]})})),Object(b.jsx)("h1",{children:"Cast"}),n.cast&&n.cast.map((function(t){return Object(b.jsxs)("li",{children:[t.name," as ",t.character]})})),Object(b.jsxs)("p",{children:[null===o||void 0===o?void 0:o.length," friends"]}),Object(b.jsxs)("p",{children:[null===O||void 0===O?void 0:O.length," collectiosn"]})]})};var k=function(){var t=Object(d.i)().id,e=Object(c.useState)(),n=Object(r.a)(e,2),i=n[0],s=n[1],a=Object(c.useState)(),o=Object(r.a)(a,2),u=o[0],h=o[1];return Object(c.useEffect)((function(){var e;(e=t,l.a.get("/api/users/".concat(e))).then((function(t){return s(t.data)}))}),[t]),Object(c.useEffect)((function(){var e;(e=t,l.a.get("/api/users/".concat(e,"/collections"))).then((function(t){return h(t.data)}))}),[t]),void 0===i?Object(b.jsx)("p",{children:"Loading"}):Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsx)("img",{alt:"",className:"pic",src:i.picture}),Object(b.jsx)("div",{children:Object(b.jsxs)("h1",{children:["User ",i.name]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(j.b,{to:"/users/{id}/collections",children:Object(b.jsx)("h1",{children:"Collections"})}),u&&u.map((function(t){return Object(b.jsx)("li",{children:t.name})}))]})]})},N=function(t){var e=t.col;return Object(b.jsx)(j.b,{to:"/collections/"+e.id,children:Object(b.jsx)("div",{className:"CollectionTile",children:Object(b.jsx)("h1",{children:e.name})})})};function E(t){var e=t.update,n=Object(c.useContext)(P),i=(Object(c.useContext)(L),Object(c.useState)()),s=Object(r.a)(i,2),a=s[0],o=s[1],j=function(){l.a.post("/api/collections").then((function(t){return o(Object(b.jsx)(d.a,{to:"/collections/".concat(t.data.id)}))})).then(e)},u=void 0===n?Object(b.jsx)("p",{children:"Loading"}):0===n.length?Object(b.jsx)("button",{onClick:j,children:"new collection"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:j,children:"new collection"}),Object(b.jsx)("div",{className:"result-grid",children:n.map((function(t){return Object(b.jsx)(N,{col:t})}))})]});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Collections"}),a,u]})}var F=function(t){var e=t.cb,n=t.setVis,i=Object(c.useState)(""),s=Object(r.a)(i,2),a=s[0],o=s[1],l=function(t){e(a),n(!1)},j=function(t){n(!1)};return Object(b.jsx)("div",{class:"Modal",onClick:j,children:Object(b.jsxs)("div",{onClick:function(t){return t.stopPropagation()},children:[Object(b.jsx)("p",{children:"Rename it"}),Object(b.jsxs)("form",{onSubmit:l,children:[Object(b.jsx)("input",{onChange:function(t){return o(t.target.value)}}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:l,children:"submit"}),Object(b.jsx)("button",{onClick:j,children:"cancel"})]})]})]})})};function M(t){var e=t.update,n=Object(d.i)().cid,i=Object(c.useState)("loading"),s=Object(r.a)(i,2),a=s[0],o=s[1],j=Object(c.useState)("loading"),u=Object(r.a)(j,2),h=u[0],O=u[1],x=Object(c.useState)(!1),p=Object(r.a)(x,2),v=p[0],m=p[1];if(Object(c.useEffect)((function(){l.a.get("/api/collections/".concat(n)).then((function(t){var e=t.data,n=e.info,c=e.movies;o(n),O(c)}))}),[n]),"loading"===h)return Object(b.jsx)("h1",{children:"Loading"});var g=0===h.length?Object(b.jsx)("p",{children:"Empty, search some movies and click the + icon"}):Object(b.jsx)("div",{className:"result-grid",children:h.map((function(t,e){return Object(b.jsx)(C,{movie:t},e)}))});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h1",{children:["Collection ",null===a||void 0===a?void 0:a.name]}),Object(b.jsx)("button",{onClick:function(){return m(!0)},children:"rename"}),g,v&&Object(b.jsx)(F,{setVis:m,cb:function(t){var c=Object(f.a)(Object(f.a)({},a),{},{name:t});l.a.put("/api/collections/".concat(n),c).then(e),o(c)}})]})}var _=function(){var t=Object(d.h)(),e=Object(c.useState)(),n=Object(r.a)(e,2),i=n[0],s=n[1],a=Object(c.useState)(),o=Object(r.a)(a,2),j=o[0],u=o[1];return Object(c.useEffect)((function(){var e=new URLSearchParams(t.search);s(e.get("q"))}),[t]),Object(c.useEffect)((function(){void 0!==i&&l.a.get("/api/search",{params:{q:i}}).then((function(t){u(t.data)}))}),[i]),console.log(j),void 0===i?Object(b.jsx)("p",{children:"Loading"}):void 0===j?Object(b.jsxs)("p",{children:["Search: ",i]}):Object(b.jsxs)("div",{className:"SearchResults",children:[Object(b.jsxs)("h1",{children:["search results for ",Object(b.jsx)("b",{children:i})]}),Object(b.jsx)("div",{className:"result-grid",children:j.map((function(t,e){return Object(b.jsx)(C,{movie:t},e)}))})]})},L=i.a.createContext(),P=i.a.createContext();var G=function(){var t=Object(c.useState)("loading"),e=Object(r.a)(t,2),n=e[0],i=e[1],s=Object(c.useState)([]),a=Object(r.a)(s,2),o=a[0],u=a[1];Object(c.useEffect)((function(){l.a.get("/api/me").then((function(t){return i(t.data)})).catch((function(t){return i("nope")}))}),[]);var f=function(){n&&l.a.get("/api/users/".concat(n.id,"/collections")).then((function(t){return u(t.data)}))};if(Object(c.useEffect)(f,[n]),"loading"===n)return Object(b.jsx)("h1",{children:"Loading"});if("nope"===n){var v='<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<title>Movify Login</title>\n\t<style>\n* {\n\tfont-family: Roboto, sans-serif;\n\tbox-sizing: border-box;\n}\nbody {\n\tbackground: #e1e1e1;\n\tmargin: 0;\n\toverflow-x: hidden;\n}\n.container {\n\tdisplay: grid;\n\theight: 100vh;\n\tgrid-template-columns: 1fr 1fr;\n}\n.bg-phone {\n\tdisplay: none;\n\tposition: absolute;\n\twidth: 100vw;\n\toverflow: hidden;\n\tz-index: -2;\n}\n.bg-desktop {\n\tposition: absolute;\n\theight: 100vh;\n\twidth: 100vw;\n\tz-index: -2;\n}\n@media screen and (max-width: 920px) {\n\t.bg-desktop { display: none; }\n\t.bg-phone { display: block; }\n\t.container {\n\t\tgrid-template-columns: 1fr;\n\t}\n}\n.container > div{\n\tmargin: auto;\n}\n.cta {\n\tcolor: white;\n\ttext-align: center;\n}\n.infos {\n\tcolor: black;\n}\n.cta h1 {\n\tfont-size: 5em;\n\tmargin: 0;\n}\n.cta p {\n\tmargin-bottom: 69px;\n}\n.login {\n\tdisplay: flex;\n}\n.login a {\n\ttext-transform: uppercase;\n\tfont-weight: 700;\n\tborder-radius: 10px;\n\tpadding: 10px;\n\tmargin: 0 20px;\n\tfont-size: 1.4em;\n}\n.login a.primary {\n\tbackground: #C70000;\n\tcolor: white;\n}\n.login a.secondary {\n\tbackground: white;\n\tcolor: #C70000;\n}\n\t</style>\n</head>\n<body>\n\t<svg class="bg-desktop" preserveAspectRatio="xMidYMid slice"\n\t\twidth="1780" height="1085" viewBox="0 0 1780 1085" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="469" y="-36" width="1312" height="1187" fill="#E1E1E1"/>\n<ellipse cx="-926.5" cy="492" rx="1874.5" ry="1851" fill="#252221"/>\n<ellipse cx="-926.5" cy="492" rx="1874.5" ry="1851" fill="url(#paint0_radial)"/>\n<defs>\n<radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-927 492) scale(2015.56 1441.26)">\n<stop offset="0.802083" stop-color="#325987"/>\n<stop offset="1" stop-color="#23466F"/>\n</radialGradient>\n</defs>\n</svg>\n\n<svg class="bg-phone"\n\twidth="841" height="1596" viewBox="0 0 841 1596" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="-203" y="636" width="1312" height="1187" fill="#E1E1E1"/>\n<ellipse cx="432" cy="-1196" rx="1929" ry="1905" fill="#252221"/>\n<ellipse cx="432" cy="-1196" rx="1929" ry="1905" fill="url(#paint1_radial)"/>\n<defs>\n<radialGradient id="paint1_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(431.485 -1196) scale(2074.17 1483.3)">\n<stop offset="0.802083" stop-color="#325987"/>\n<stop offset="1" stop-color="#23466F"/>\n</radialGradient>\n</defs>\n</svg>\n\n\t<div class="container">\n\t\t<div class="cta">\n\t\t\t<img src="$MOVIFY_LOGO">\n\t\t\t<h1>Movify</h1>\n\t\t\t<p>kek dans le fion</p>\n\t\t\t<div class="login">\n\t\t\t\t<a href="/api/login" class="primary">Sign up</a>\n\t\t\t\t<a href="/api/login" class="secondary">Sign in</a>\n\t\t\t</div>\n\n\t\t</div>\n\t\t<div class="infos">\n\t\t\t<div class="blabla">\n\t\t\t\tthis is an entry...<br>\n\t\t\t\tbuilt with love and ur mom<br>\n\t\t\t\tMatthias, Paul and Maria<br>\n\n\t\t\t\t<br>\n\t\t\t\tany similarities with other<br>\n\t\t\t\tservices are unfortunate\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</body>\n</html>\n'.replace("$MOVIFY_LOGO",h);return Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:v}})}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(L.Provider,{value:n,children:Object(b.jsx)(P.Provider,{value:o,children:Object(b.jsxs)(j.a,{children:[Object(b.jsx)(O,{}),Object(b.jsx)(x,{uid:n.id}),Object(b.jsx)("div",{className:"Page",children:Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{path:"/search",children:Object(b.jsx)(_,{})}),Object(b.jsx)(d.b,{path:"/movies/:id",children:Object(b.jsx)(S,{})}),Object(b.jsx)(d.b,{path:"/friends",children:Object(b.jsx)(m,{})}),Object(b.jsx)(d.b,{path:"/users/:uid/collections",children:Object(b.jsx)(E,{update:f})}),Object(b.jsx)(d.b,{path:"/users/:id",children:Object(b.jsx)(k,{})}),Object(b.jsx)(d.b,{path:"/collections/:cid",children:Object(b.jsx)(M,{update:f})}),Object(b.jsx)(d.b,{path:"/",children:Object(b.jsx)(p,{user:n})})]})})]})})})})};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(G,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.492ac318.chunk.js.map